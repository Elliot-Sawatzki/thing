namespace SpriteKind {
    export const Killer = SpriteKind.create()
    export const baby_killer = SpriteKind.create()
    export const Ghost_block = SpriteKind.create()
}
scene.onHitWall(SpriteKind.Player, function (sprite, location) {
	
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Killer, function (sprite, otherSprite) {
    baby_killer = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . f f f f f f . . . 
        . . . f f f . f . f f . . 
        . . f f f . . f f . f f . 
        . . f . f . . . f . . f . 
        . . f . f . . . f . . f . 
        `, The_killer, -47, 0)
    baby_killer_2 = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . f f f f f f . . . 
        . . . f f f . f . f f . . 
        . . f f f . . f f . f f . 
        . . f . f . . . f . . f . 
        . . f . f . . . f . . f . 
        `, The_killer, 47, 0)
    sprites.destroy(projectile)
    sprites.destroy(The_killer)
    pause(300)
    baby_killer.setKind(SpriteKind.Enemy)
    baby_killer_2.setKind(SpriteKind.baby_killer)
    baby_killer.follow(mySprite, 45)
    baby_killer_2.follow(mySprite, 45)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (controller.left.isPressed()) {
        projectile = sprites.createProjectileFromSprite(img`
            f f f f f 
            f 8 9 9 f 
            f 8 6 9 f 
            f 8 8 8 f 
            f f f f f 
            `, mySprite, -85, 0)
    }
    if (controller.right.isPressed()) {
        projectile = sprites.createProjectileFromSprite(img`
            f f f f f 
            f 8 9 9 f 
            f 8 6 9 f 
            f 8 8 8 f 
            f f f f f 
            `, mySprite, 85, 0)
    }
    if (controller.up.isPressed()) {
        projectile = sprites.createProjectileFromSprite(img`
            f f f f f 
            f 8 9 9 f 
            f 8 6 9 f 
            f 8 8 8 f 
            f f f f f 
            `, mySprite, 0, -85)
    }
    if (controller.down.isPressed()) {
        projectile = sprites.createProjectileFromSprite(img`
            f f f f f 
            f 8 9 9 f 
            f 8 6 9 f 
            f 8 8 8 f 
            f f f f f 
            `, mySprite, 0, 85)
    }
    pause(750)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Killer, function (sprite, otherSprite) {
    info.changeLifeBy(randint(-1, -1))
    The_killer.setImage(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . f f f f . 
        . . . . . . . . . . f f . . f f 
        . . . . . . . . . . f f . f . f 
        . . . . . . . . . . . f . . f f 
        . . . . f f f f f f f f f f f . 
        . . . . f . f . . f . f f f . . 
        . . f f . f f . . f f . . f f . 
        . . f . . f . . . . . f f . . f 
        . f . . f . . . . . . . . f . f 
        . f . . f . . . . . . . . . f . 
        . f . . f . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    pause(300)
    The_killer.setImage(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . f f f f . 
        . . . . . . . . . . f f . . f f 
        . . . . . . . . . . f f . f . f 
        . . . . . . . . . . . f . . f f 
        . . . . f f f f f f f f f f f . 
        . . . . f . f . . f . f f f . . 
        . . f f . f f . . f f . . f . . 
        . . f . . f . . . . f . . f . . 
        . f . . f . . . . . f . . . f . 
        . f . . f . . . . . f f . . . f 
        . f . . f . . . . . . f . . . f 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    pause(1500)
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.stairWest, function (sprite, location) {
    tiles.setCurrentTilemap(tilemap`level1`)
    mySprite.setPosition(20, 125)
    tiles.setWallAt(tiles.getTileLocation(0, 7), false)
    tiles.setWallAt(tiles.getTileLocation(0, 8), false)
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.stairEast, function (sprite, location) {
    tiles.setCurrentTilemap(tilemap`level2`)
    mySprite.setPosition(230, 95)
})
info.onLifeZero(function () {
    sprites.destroy(mySprite)
    pause(200)
    game.reset()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.baby_killer, function (sprite, otherSprite) {
    mySprite.x += 10
    info.changeLifeBy(randint(-1, -1))
    baby_killer_2.setImage(img`
        . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . 
        . . . . . . f f f . . . . . . 
        . . . . . . f f f . . . . . . 
        . . . . . . f f f . . . . . . 
        . f f f f f f f f f f f f f . 
        f f . . f . . . . . f . . f f 
        f . f f f . . . . . f f f . f 
        f . f . . . . . . . . . f . f 
        . f f . . . . . . . . . f f . 
        `)
    pause(300)
    baby_killer_2.setImage(img`
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . f f f f f f . . . 
        . . . f f f . f . f f . . 
        . . f f f . . f f . f f . 
        . . f . f . . . f . . f . 
        . . f . f . . . f . . f . 
        `)
    pause(1500)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`transparency16`, function (sprite, location) {
	
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    sprites.destroy(baby_killer, effects.confetti, 2000)
    sprites.destroy(projectile)
    tiles.setWallAt(tiles.getTileLocation(0, 7), false)
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.baby_killer, function (sprite, otherSprite) {
    sprites.destroy(baby_killer_2, effects.confetti, 2000)
    sprites.destroy(projectile)
    tiles.setWallAt(tiles.getTileLocation(0, 8), false)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    baby_killer_2.x += 10
    info.changeLifeBy(randint(-1, -1))
    baby_killer.setImage(img`
        . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . 
        . . . . . . f f f . . . . . . 
        . . . . . . f f f . . . . . . 
        . . . . . . f f f . . . . . . 
        . f f f f f f f f f f f f f . 
        f f . . f . . . . . f . . f f 
        f . f f f . . . . . f f f . f 
        f . f . . . . . . . . . f . f 
        . f f . . . . . . . . . f f . 
        `)
    pause(300)
    baby_killer.setImage(img`
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . . . . . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . . . f f f . . . . 
        . . . . f f f f f f . . . 
        . . . f f f . f . f f . . 
        . . f f f . . f f . f f . 
        . . f . f . . . f . . f . 
        . . f . f . . . f . . f . 
        `)
    info.changeLifeBy(randint(-1, -1))
    pause(1500)
})
let projectile: Sprite = null
let baby_killer_2: Sprite = null
let baby_killer: Sprite = null
let The_killer: Sprite = null
let mySprite: Sprite = null
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ..........1.....................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
pause(5000)
tiles.setCurrentTilemap(tilemap`level1`)
info.setLife(3)
music.play(music.createSong(hex`0064000408010304001c00100500640000041e000004000000000000000000000000000a0400041d0018002000180506080a0c0d0f1112141618191b1d1e2022242527292a2c05001c000f0a006400f4010a00000400000000000000000000000000000000021d0018002000180506080a0c0d0f1112141618191b1d1e2022242527292a2c08001c000e050046006603320000040a002d00000064001400013200020100025d00000008000f0506080a0c0d0f1112141618191b1d08001000100506080a0c0d0f1112141618191b1d1e10001800120506080a0c0d0f1112141618191b1d1e202218002000180506080a0c0d0f1112141618191b1d1e2022242527292a2c`), music.PlaybackMode.LoopingInBackground)
mySprite = sprites.create(img`
    ....................
    ....................
    ....................
    ....fffffffff.......
    ....f.......f.......
    ....f.f...f.f.......
    ....f.......f.......
    ....f...f...f.......
    ....f.......f.......
    ....f...f...f.......
    ....fffffffff.......
    ........f...........
    ........f...........
    .......fff..........
    ......f.f.f.........
    .....f..f..f........
    ........f...........
    ........f...........
    .......f.f..........
    ......f...f.........
    `, SpriteKind.Player)
mySprite.setStayInScreen(true)
mySprite.setPosition(158, 115)
controller.moveSprite(mySprite, 60, 60)
scene.cameraFollowSprite(mySprite)
pause(100)
The_killer = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . f f f f . 
    . . . . . . . . . . f f . . f f 
    . . . . . . . . . . f f . f . f 
    . . . . . . . . . . . f . . f f 
    . . . . f f f f f f f f f f f . 
    . . . . f . f . . f . f f f . . 
    . . f f . f f . . f f . . f . . 
    . . f . . f . . . . f . . f . . 
    . f . . f . . . . . f . . . f . 
    . f . . f . . . . . f f . . . f 
    . f . . f . . . . . . f . . . f 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Killer)
The_killer.setPosition(14, 15)
The_killer.follow(mySprite, 40)
